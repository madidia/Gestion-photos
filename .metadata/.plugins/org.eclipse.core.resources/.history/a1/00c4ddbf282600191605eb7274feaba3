package src.main;

import java.sql.SQLException;
import java.text.ParseException;

import src.connexion.Connexion;
import src.menu.Menu;
import src.models.Adresse;
import src.models.Client;
import src.models.Code;
import src.models.Commande;
import src.models.Impression;
import src.models.Support;
import src.procedureJdbc.*;

public class Test {

	public static void main(String[] args) throws SQLException, ParseException {
		DAO.conn = Connexion.getConnection();
		/*Menu m = new Menu();
		m.menuPrincipal(); */
		ClientDAO c = new ClientDAO();
		Client ac = c.find("sgidney0@typepad.com");
		Adresse adr= new Adresse("6 bis rue du vieux temple 38000 Grenoble", ac);
		Code code = new Code("q5SQDKJD", 5);
		CommandeDAO com = new CommandeDAO();
		Commande cmd = new Commande(ac, adr, code);
					
		cmd.getImpressions().add(new Impression("A3", "faible", 100,cmd,new Support("papier",
				"A3", "faible", 500, 1.5)));
		
		cmd.calculeMontant(cmd.getImpressions());
		
		/** creer commande */
		com.create(cmd);
		
		System.out.println("commande num "+cmd.getId());
		
		SupportDAO s= new SupportDAO();
		s.conn=Connexion.getConnection();
		//Support sp=s.find("papier-A3-faible");
		Support sup=s.create(new Support("papier","A4", "faible", 500, 1.5));
		/**creer support */
		System.out.println("format du support "+sup.getFormat());
		
		ImpressionDAO idao = new ImpressionDAO();
		idao.conn=Connexion.getConnection();
		Impression i=idao.create(new Impression("A3", "faible", 100,cmd,sup));
		
		System.out.println("id nouvelle impression "+i.getId());
				
		
        DAO.conn.close();
        System.out.println("fin");
		
	}

}
