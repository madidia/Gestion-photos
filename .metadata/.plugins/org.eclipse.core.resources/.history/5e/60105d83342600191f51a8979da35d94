package src.main;

import java.sql.SQLException;
import java.text.ParseException;

import src.connexion.Connexion;
import src.menu.Menu;
import src.models.Administrateur;
import src.models.Adresse;
import src.models.Agenda;
import src.models.Client;
import src.models.Code;
import src.models.Commande;
import src.models.Image;
import src.models.Impression;
import src.models.Support;
import src.procedureJdbc.*;

public class Test {

	public static void main(String[] args) throws SQLException, ParseException {
		DAO.conn = Connexion.getConnection();
		/*Menu m = new Menu();
		m.menuPrincipal(); */
		SupportDAO sdao= new SupportDAO();
		ImpressionDAO idao = new ImpressionDAO();
		CommandeDAO comdao = new CommandeDAO();
		ClientDAO c = new ClientDAO();
		ImageDAO imDAO = new ImageDAO();
		Client ac = new Client("mail@gmail.com", "diallo", "mamadou","1234");
		ac=c.find("mail@gmail.com");
		AdministrateurDAO adminDAO= new AdministrateurDAO();
		Administrateur admin = new Administrateur("admin@gmail.com", "jeddah", "raul", "1234");
		adminDAO.create(admin);
		AdresseDAO adAO = new AdresseDAO();
		Adresse adr= new Adresse("6 bis rue du vieux temple 38000 Grenoble", ac);
		adr=adAO.create(adr);
		Code code = null;
		Commande cmd = new Commande(ac, adr, code);
		Support supp = new Support("papier","A3", "faible", 500, 1.5) ;
		//supp=sdao.create(supp);
		System.out.println("format du support "+supp.getFormat());

		Impression imp = new Impression("A3", "faible", 100,cmd,supp);
		
		System.out.println("id nouvelle impression "+imp.getId());
		cmd.getImpressions().add(imp);
		
		Agenda ag = new Agenda(imp, "semaine", "mon model");
		cmd.calculeMontant(cmd.getImpressions());
		
		/** creer commande */
		comdao.create(cmd);
		idao.create(imp);
		// afficher la commande
		
		Image img = new Image("hh/jj/kk", ac, 10, "oui");
		img=imDAO.create(img);
		System.out.println(cmd.getStringCommande());		
				
		
        DAO.conn.close();
        System.out.println("fin");
		
	}

}
